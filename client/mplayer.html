<html>
<head>
<meta charset='utf-8'>
<title>GosuListen</title>

<!-- load from cdn -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="http://processingjs.org/js/processing.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>

    var slow = '<iframe width="560" height="315" src="http://www.youtube.com/embed/videoseries?list=PL03F5FBFB84F5FD83&autoplay=1&amp;hl=en_US" frameborder="0" allowfullscreen></iframe>';

    var medium = '<iframe width="560" height="315" src="http://www.youtube.com/embed/videoseries?list=PL2CD56CF5015D0587&autoplay=1&amp;hl=en_US" frameborder="0" allowfullscreen></iframe>';

    var fast = '<iframe width="560" height="315" src="http://www.youtube.com/embed/videoseries?list=PL0E1DC7FEF1D17512&autoplay=1&amp;hl=en_US" frameborder="0" allowfullscreen></iframe>';
    
    var mood = 0;

    $(document).ready(function() {
        // Handler for .ready() called.

        var url = location.href;
        var i = url.lastIndexOf('/');
        url = url.substr(0, i);
        //console.log(url);
        var socket = io.connect(url);

        var pak = $("#pakrox");
        pak.html(slow); // auto play slow

        socket.on('meta', function(data) {
            if (data.mood != mood) {
                // change
                mood = data.mood;
                switch (mood) {
                    case 0:
                        pak.html(slow);
                        break;
                    case 1:
                        pak.html(medium);
                        break;
                    case 2:
                        pak.html(fast);
                        break;
                }
            }
        });

    });

</script>
</head>


<body>

<h1>GosuListen</h1>

<p>Listen Coding tunes</p>

<div id="pakrox"></div>

</body>
</html>
